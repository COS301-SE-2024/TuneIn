<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>tunein-backend documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	   <link rel="stylesheet" href="../styles/style.css">
        <link rel="stylesheet" href="../styles/dark.css">
    </head>
    <body>
          <script>
               // Blocking script to avoid flickering dark mode
               // Dark mode toggle button
               var useDark = window.matchMedia('(prefers-color-scheme: dark)');
               var darkModeState = useDark.matches;
               var $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               var $darkModeToggles = document.querySelectorAll('.dark-mode-switch');
               var darkModeStateLocal = localStorage.getItem('compodoc_darkmode-state');

               function checkToggle(check) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].checked = check;
                    }
               }

               function toggleDarkMode(state) {
                    if (window.localStorage) {
                         localStorage.setItem('compodoc_darkmode-state', state);
                    }

                    checkToggle(state);

                    const hasClass = document.body.classList.contains('dark');

                    if (state) {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.add('dark');
                         }
                         if (!hasClass) {
                              document.body.classList.add('dark');
                         }
                    } else {
                         for (var i = 0; i < $darkModeToggles.length; i++) {
                              $darkModeToggles[i].classList.remove('dark');
                         }
                         if (hasClass) {
                              document.body.classList.remove('dark');
                         }
                    }
               }

               useDark.addEventListener('change', function (evt) {
                    toggleDarkMode(evt.matches);
               });
               if (darkModeStateLocal) {
                    darkModeState = darkModeStateLocal === 'true';
               }
               toggleDarkMode(darkModeState);
          </script>

        <div class="navbar navbar-default navbar-fixed-top d-md-none p-0">
               <div class="d-flex">
                    <a href="../" class="navbar-brand">tunein-backend documentation</a>
                    <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
               </div>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="d-none d-md-block menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content injectable">
                   <div class="content-data">








<ol class="breadcrumb">
  <li class="breadcrumb-item">Injectables</li>
  <li class="breadcrumb-item" >DtoGenService</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="nav-item">
            <a href="#info" 
                class="nav-link"
                class="nav-link active"
                role="tab" id="info-tab" data-bs-toggle="tab" data-link="info">Info</a>
        </li>
        <li class="nav-item">
            <a href="#source" 
                class="nav-link"
                
                role="tab" id="source-tab" data-bs-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/modules/dto-gen/dto-gen.service.ts</code>
        </p>





            <section data-compodoc="block-index">
    <h3 id="index">Index</h3>
    <table class="table table-sm table-bordered index-table">
        <tbody>

                <tr>
                    <td class="col-md-4">
                        <h6><b>Methods</b></h6>
                    </td>
                </tr>
                <tr>
                    <td class="col-md-4">
                        <ul class="index-list">
                            <li>
                                <a href="#generateBriefUserDto" >generateBriefUserDto</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#generateDirectMessageDto" >generateDirectMessageDto</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#generateLiveChatMessageDto" >generateLiveChatMessageDto</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#generateMultipleDirectMessageDto" >generateMultipleDirectMessageDto</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#generateMultipleLiveChatMessageDto" >generateMultipleLiveChatMessageDto</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#generateMultipleRoomDto" >generateMultipleRoomDto</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#generateMultipleRoomDtoFromRoom" >generateMultipleRoomDtoFromRoom</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#generateMultipleUserDto" >generateMultipleUserDto</a>
                            </li>
                            <li>
                                    <span class="modifier">Async</span>
                                <a href="#getChatAsDirectMessageDto" >getChatAsDirectMessageDto</a>
                            </li>
                            <li>
                                <a href="#messageBodyIsRoomID" >messageBodyIsRoomID</a>
                            </li>
                        </ul>
                    </td>
                </tr>





        </tbody>
    </table>
</section>

            <section data-compodoc="block-constructor">
    <h3 id="constructor">Constructor</h3>
        <table class="table table-sm table-bordered">
            <tbody>
                <tr>
                    <td class="col-md-4">
<code>constructor(prisma: <a href="../injectables/PrismaService.html" target="_self">PrismaService</a>, dbUtils: <a href="../injectables/DbUtilsService.html" target="_self">DbUtilsService</a>)</code>
                    </td>
                </tr>
                        <tr>
                            <td class="col-md-4">
                                <div class="io-line">Defined in <a href="" data-line="18" class="link-to-prism">src/modules/dto-gen/dto-gen.service.ts:18</a></div>
                            </td>
                        </tr>

                <tr>
                    <td class="col-md-4">
                            <div>
                                    <b>Parameters :</b>
                                    <table class="params">
                                        <thead>
                                            <tr>
                                                <td>Name</td>
                                                    <td>Type</td>
                                                <td>Optional</td>
                                            </tr>
                                        </thead>
                                        <tbody>
                                                <tr>
                                                        <td>prisma</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/PrismaService.html" target="_self" >PrismaService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                                <tr>
                                                        <td>dbUtils</td>
                                                  
                                                        <td>
                                                                        <code><a href="../injectables/DbUtilsService.html" target="_self" >DbUtilsService</a></code>
                                                        </td>
                                                  
                                                    <td>
                                                            No
                                                    </td>
                                                    
                                                </tr>
                                        </tbody>
                                    </table>
                            </div>
                    </td>
                </tr>
            </tbody>
        </table>
</section>

            <section data-compodoc="block-methods">
    
    <h3 id="methods">
        Methods
    </h3>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="generateBriefUserDto"></a>
                    <span class="name">
                        <span ><b>generateBriefUserDto</b></span>
                        <a href="#generateBriefUserDto"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>generateBriefUserDto(user: <a href="../undefineds/UserWithAuth.html" target="_self">UserWithAuth</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="24"
                                    class="link-to-prism">src/modules/dto-gen/dto-gen.service.ts:24</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>user</td>
                                            <td>
                                                            <code><a href="../miscellaneous/typealiases.html#UserWithAuth" target="_self" >UserWithAuth</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../classes/UserDto.html" target="_self" >UserDto</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="generateDirectMessageDto"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>generateDirectMessageDto</b></span>
                        <a href="#generateDirectMessageDto"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>generateDirectMessageDto(pmID: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="477"
                                    class="link-to-prism">src/modules/dto-gen/dto-gen.service.ts:477</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>pmID</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../classes/DirectMessageDto.html" target="_self" >Promise&lt;DirectMessageDto&gt;</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="generateLiveChatMessageDto"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>generateLiveChatMessageDto</b></span>
                        <a href="#generateLiveChatMessageDto"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>generateLiveChatMessageDto(messageID: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="386"
                                    class="link-to-prism">src/modules/dto-gen/dto-gen.service.ts:386</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>messageID</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../classes/LiveChatMessageDto.html" target="_self" >Promise&lt;LiveChatMessageDto&gt;</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="generateMultipleDirectMessageDto"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>generateMultipleDirectMessageDto</b></span>
                        <a href="#generateMultipleDirectMessageDto"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>generateMultipleDirectMessageDto(dms: ()[])</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="629"
                                    class="link-to-prism">src/modules/dto-gen/dto-gen.service.ts:629</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>dms</td>
                                            <td>
                                                        <code>()[]</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../classes/DirectMessageDto.html" target="_self" >Promise&lt;DirectMessageDto[]&gt;</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="generateMultipleLiveChatMessageDto"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>generateMultipleLiveChatMessageDto</b></span>
                        <a href="#generateMultipleLiveChatMessageDto"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>generateMultipleLiveChatMessageDto(messages: PrismaTypes.message[])</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="421"
                                    class="link-to-prism">src/modules/dto-gen/dto-gen.service.ts:421</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>messages</td>
                                            <td>
                                                        <code>PrismaTypes.message[]</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../classes/LiveChatMessageDto.html" target="_self" >Promise&lt;LiveChatMessageDto[]&gt;</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="generateMultipleRoomDto"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>generateMultipleRoomDto</b></span>
                        <a href="#generateMultipleRoomDto"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>generateMultipleRoomDto(roomIDs: string[], userID: string | undefined)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="196"
                                    class="link-to-prism">src/modules/dto-gen/dto-gen.service.ts:196</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Default value</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>roomIDs</td>
                                            <td>
                                                        <code>string[]</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                            </td>

                                        </tr>
                                        <tr>
                                                <td>userID</td>
                                            <td>
                                                        <code>string | undefined</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                                    <code>undefined</code>
                                            </td>

                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../classes/RoomDto.html" target="_self" >Promise&lt;RoomDto[]&gt;</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="generateMultipleRoomDtoFromRoom"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>generateMultipleRoomDtoFromRoom</b></span>
                        <a href="#generateMultipleRoomDtoFromRoom"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>generateMultipleRoomDtoFromRoom(rooms: <a href="../undefineds/FullyQualifiedRoom.html" target="_self">FullyQualifiedRoom[]</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="324"
                                    class="link-to-prism">src/modules/dto-gen/dto-gen.service.ts:324</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>rooms</td>
                                            <td>
                                                            <code><a href="../miscellaneous/typealiases.html#FullyQualifiedRoom" target="_self" >FullyQualifiedRoom[]</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../classes/RoomDto.html" target="_self" >Promise&lt;RoomDto[]&gt;</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="generateMultipleUserDto"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>generateMultipleUserDto</b></span>
                        <a href="#generateMultipleUserDto"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>generateMultipleUserDto(userIDs: string[], userID: string | undefined, fully_qualify)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="63"
                                    class="link-to-prism">src/modules/dto-gen/dto-gen.service.ts:63</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Default value</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>userIDs</td>
                                            <td>
                                                        <code>string[]</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                            </td>

                                        </tr>
                                        <tr>
                                                <td>userID</td>
                                            <td>
                                                        <code>string | undefined</code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                                    <code>undefined</code>
                                            </td>

                                        </tr>
                                        <tr>
                                                <td>fully_qualify</td>
                                            <td>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                                    <code>false</code>
                                            </td>

                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../classes/UserDto.html" target="_self" >Promise&lt;UserDto[]&gt;</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="getChatAsDirectMessageDto"></a>
                    <span class="name">
                            <span class="modifier">Async</span>
                        <span ><b>getChatAsDirectMessageDto</b></span>
                        <a href="#getChatAsDirectMessageDto"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
                        <span class="modifier-icon icon ion-ios-reset"></span>
                    <code>getChatAsDirectMessageDto(participant1: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, participant2: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>, unreadOnly)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="523"
                                    class="link-to-prism">src/modules/dto-gen/dto-gen.service.ts:523</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                                <td>Default value</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>participant1</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                            </td>

                                        </tr>
                                        <tr>
                                                <td>participant2</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                            </td>

                                        </tr>
                                        <tr>
                                                <td>unreadOnly</td>
                                            <td>
                                            </td>

                                            <td>
                                                    No
                                            </td>

                                            <td>
                                                    <code>false</code>
                                            </td>

                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="../classes/DirectMessageDto.html" target="_self" >Promise&lt;DirectMessageDto[]&gt;</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
    <table class="table table-sm table-bordered">
        <tbody>
            <tr>
                <td class="col-md-4">
                    <a name="messageBodyIsRoomID"></a>
                    <span class="name">
                        <span ><b>messageBodyIsRoomID</b></span>
                        <a href="#messageBodyIsRoomID"><span class="icon ion-ios-link"></span></a>
                    </span>
                </td>
            </tr>
            <tr>
                <td class="col-md-4">
<code>messageBodyIsRoomID(messageBody: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank">string</a>)</code>
                </td>
            </tr>


                    <tr>
                        <td class="col-md-4">
                            <div class="io-line">Defined in <a href="" data-line="678"
                                    class="link-to-prism">src/modules/dto-gen/dto-gen.service.ts:678</a></div>
                        </td>
                    </tr>


            <tr>
                <td class="col-md-4">

                            <div class="io-description">
                                <b>Parameters :</b>
                                
                                <table class="params">
                                    <thead>
                                        <tr>
                                            <td>Name</td>
                                                <td>Type</td>
                                            <td>Optional</td>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                                <td>messageBody</td>
                                            <td>
                                                            <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
                                            </td>

                                            <td>
                                                    No
                                            </td>


                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        <div class="io-description">
                            <b>Returns : </b>        <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/boolean" target="_blank" >boolean</a></code>

                        </div>
                            <div class="io-description">
                                
                            </div>
                </td>
            </tr>
        </tbody>
    </table>
</section>

    </div>


    <div class="tab-pane fade  tab-source-code" id="source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Injectable } from &quot;@nestjs/common&quot;;
import { RoomDto } from &quot;../rooms/dto/room.dto&quot;;
import { UserDto } from &quot;../users/dto/user.dto&quot;;
import { PrismaService } from &quot;../../../prisma/prisma.service&quot;;
//import { Prisma } from &quot;@prisma/client&quot;;
import * as PrismaTypes from &quot;@prisma/client&quot;;
import {
	DbUtilsService,
	FullyQualifiedRoom,
	UserWithAuth,
} from &quot;../db-utils/db-utils.service&quot;;
import { LiveChatMessageDto } from &quot;../../live/dto/livechatmessage.dto&quot;;
import { DirectMessageDto } from &quot;../users/dto/dm.dto&quot;;
import validator from &quot;validator&quot;;

// A service that will generate DTOs
@Injectable()
export class DtoGenService {
	constructor(
		private readonly prisma: PrismaService,
		private readonly dbUtils: DbUtilsService,
	) {}

	generateBriefUserDto(user: UserWithAuth): UserDto {
		return {
			profile_name: user.full_name || &quot;&quot;,
			userID: user.user_id,
			username: user.username,
			profile_picture_url: user.profile_picture || &quot;&quot;,
			followers: {
				count: 0,
				data: [],
			},
			following: {
				count: 0,
				data: [],
			},
			links: {
				count: 0,
				data: {},
			},
			bio: user.bio || &quot;&quot;,
			fav_genres: {
				count: 0,
				data: [],
			},
			fav_songs: {
				count: 0,
				data: [],
			},
			fav_rooms: {
				count: 0,
				data: [],
			},
			recent_rooms: {
				count: 0,
				data: [],
			},
			hasSpotifyAccount: user.authentication !&#x3D;&#x3D; null,
		};
	}

	async generateMultipleUserDto(
		userIDs: string[],
		userID: string | undefined &#x3D; undefined,
		fully_qualify &#x3D; false,
	): Promise&lt;UserDto[]&gt; {
		let blocked: PrismaTypes.blocked[] &#x3D; [];
		if (userID &amp;&amp; userID !&#x3D;&#x3D; null) {
			blocked &#x3D; await this.prisma.blocked.findMany({
				where: { OR: [{ blockee: userID }, { blocker: userID }] },
			});
		}
		// create a an array of all the blocker and blockee ids and only include unique
		const blocked_ids: string[] &#x3D; [
			...new Set([
				...blocked.map((b) &#x3D;&gt; b.blocker),
				...blocked.map((b) &#x3D;&gt; b.blockee),
			]),
		];
		// exclude userID from the blocked_ids
		const blocked_id &#x3D; blocked_ids.filter((id) &#x3D;&gt; id !&#x3D;&#x3D; userID);
		const users &#x3D; await this.prisma.users.findMany({
			where: {
				AND: [{ user_id: { in: userIDs } }, { user_id: { notIn: blocked_id } }],
			},
			include: {
				authentication: true,
				favorite_genres: {
					include: { genre: true },
				},
				favorite_songs: {
					include: { song: true },
				},
			},
		});

		if (users.length &#x3D;&#x3D;&#x3D; 0) {
			return [];
		}

		const result: UserDto[] &#x3D; [];
		for (let i &#x3D; 0, n &#x3D; users.length; i &lt; n; i++) {
			const u &#x3D; users[i];
			const user: UserDto &#x3D; this.generateBriefUserDto(u);
			user.links &#x3D; this.dbUtils.getLinks(u);
			user.fav_genres &#x3D; {
				count: u.favorite_genres.length,
				data: u.favorite_genres
					.map((genre) &#x3D;&gt; genre.genre?.genre)
					.filter((name): name is string &#x3D;&gt; name !&#x3D;&#x3D; null),
			};

			user.fav_songs &#x3D; {
				count: u.favorite_songs.length,
				data: u.favorite_songs.map((song) &#x3D;&gt; ({
					songID: song.song.song_id,
					title: song.song.name,
					artists: song.song.artists,
					cover: song.song.artwork_url as string,
					spotify_id: song.song.spotify_id,
					duration: song.song.duration as number,
				})),
			};
			user.hasSpotifyAccount &#x3D; u.authentication !&#x3D;&#x3D; null;

			if (fully_qualify) {
				const recent_rooms &#x3D; this.dbUtils.getActivity(u);
				user.recent_rooms &#x3D; {
					count: recent_rooms.count,
					data: recent_rooms.data,
				};

				const [currentRoom, bookmarkedRooms]: PrismaTypes.room[][] &#x3D;
					await this.prisma.$transaction([
						this.prisma.room.findMany({
							where: {
								participate: {
									some: {
										user_id: u.user_id,
									},
								},
							},
						}),
						this.prisma.room.findMany({
							where: {
								bookmark: {
									some: {
										user_id: u.user_id,
									},
								},
							},
						}),
					]);

				if (currentRoom.length &gt; 0) {
					user.current_room_id &#x3D; currentRoom[0].room_id;
				}
				user.fav_rooms &#x3D; {
					count: bookmarkedRooms.length,
					data: bookmarkedRooms.map((r) &#x3D;&gt; r.room_id),
				};

				const followData: {
					following: UserWithAuth[];
					followers: UserWithAuth[];
				} &#x3D; await this.dbUtils.getUserFollowersAndFollowing(user.userID);

				for (let i &#x3D; 0; i &lt; followData.following.length; i++) {
					const f &#x3D; followData.following[i];
					const u: UserDto &#x3D; this.generateBriefUserDto(f);
					user.following.data.push(u);
				}
				user.following.count &#x3D; followData.following.length;

				for (let i &#x3D; 0; i &lt; followData.followers.length; i++) {
					const f &#x3D; followData.followers[i];
					const u: UserDto &#x3D; this.generateBriefUserDto(f);
					user.followers.data.push(u);
				}
				user.followers.count &#x3D; followData.followers.length;
			} else {
				const followData: {
					following: number;
					followers: number;
				} &#x3D; await this.dbUtils.getUserFollowersAndFollowingCount(user.userID);

				user.following.count &#x3D; followData.following;
				user.followers.count &#x3D; followData.followers;
			}
			result.push(user);
		}
		return result;
	}

	async generateMultipleRoomDto(
		roomIDs: string[],
		userID: string | undefined &#x3D; undefined,
	): Promise&lt;RoomDto[]&gt; {
		if (roomIDs.length &#x3D;&#x3D;&#x3D; 0) {
			return [];
		}

		//
		let blocked: PrismaTypes.blocked[] &#x3D; [];
		if (userID &amp;&amp; userID !&#x3D;&#x3D; null) {
			blocked &#x3D; await this.prisma.blocked.findMany({
				where: { OR: [{ blockee: userID }, { blocker: userID }] },
			});
		}
		// create a an array of all the blocker and blockee ids and only include unique
		const blocked_ids: string[] &#x3D; [
			...new Set([
				...blocked.map((b) &#x3D;&gt; b.blocker),
				...blocked.map((b) &#x3D;&gt; b.blockee),
			]),
		];

		// get private rooms from users who aren&#x27;t friends with the user then exclude them
		let nonFriends: PrismaTypes.friends[] &#x3D; [];
		if (userID) {
			nonFriends &#x3D; await this.prisma.friends.findMany({
				where: {
					OR: [
						{ friend1: userID, is_pending: false },
						{ friend2: userID, is_pending: false },
					],
				},
			});
		}
		console.log(&quot;nonFriends: &quot; + JSON.stringify(nonFriends));
		const friendIDs: string[] &#x3D; nonFriends.map((f) &#x3D;&gt;
			f.friend1 &#x3D;&#x3D;&#x3D; userID ? f.friend2 : f.friend1,
		);
		if (userID) {
			friendIDs.push(userID);
		}
		// get private rooms from users who aren&#x27;t friends with the user then exclude them
		const nonFriendPrivateRooms &#x3D; await this.prisma.private_room.findMany({
			where: {
				room_id: { in: roomIDs },
			}, // include rooms with room_creator not in friendIDs
			include: { room: true },
		});
		// filter out the private rooms that are not created by friends, then just return the room_id
		const nonFriendPrivateRoomIDs &#x3D; nonFriendPrivateRooms
			.filter((r) &#x3D;&gt; !friendIDs.includes(r.room.room_creator))
			.map((r) &#x3D;&gt; r.room_id);
		// remove private rooms from the room_ids
		const nonPrivateRoomIDs &#x3D; roomIDs.filter(
			(id) &#x3D;&gt; !nonFriendPrivateRoomIDs.includes(id),
		);
		// exclude userID from the blocked_ids
		const blocked_id &#x3D; blocked_ids.filter((id) &#x3D;&gt; id !&#x3D;&#x3D; userID);
		const rooms: FullyQualifiedRoom[] &#x3D; await this.prisma.room.findMany({
			where: {
				AND: [
					{ room_id: { in: nonPrivateRoomIDs } },
					{ room_creator: { notIn: blocked_id } },
				],
			},
			include: {
				child_room_child_room_parent_room_idToroom: true,
				participate: true,
				private_room: true,
				public_room: true,
				scheduled_room: true,
			},
		});

		const userIDs: string[] &#x3D; rooms.map((r) &#x3D;&gt; r.room_creator);
		const users: UserWithAuth[] &#x3D; await this.dbUtils.getUsersWithAuth(userIDs);
		const userDtos: UserDto[] &#x3D; users.map((u) &#x3D;&gt; this.generateBriefUserDto(u));

		const result: RoomDto[] &#x3D; [];
		for (let i &#x3D; 0; i &lt; rooms.length; i++) {
			const r &#x3D; rooms[i];
			if (r &amp;&amp; r !&#x3D;&#x3D; null) {
				const u &#x3D; userDtos.find((u) &#x3D;&gt; u.userID &#x3D;&#x3D;&#x3D; r.room_creator);
				if (!u || u &#x3D;&#x3D;&#x3D; null) {
					throw new Error(
						&quot;Weird error. Got users from Rooms table but user (&quot; +
							r.room_creator +
							&quot;) not found in Users table&quot;,
					);
				}
				const childrenRooms &#x3D; r.child_room_child_room_parent_room_idToroom.map(
					(r) &#x3D;&gt; r.room_id,
				);
				const sRoom &#x3D; r.scheduled_room;
				const scheduledRoom &#x3D; sRoom
					? {
							start_date: sRoom.start_date || undefined,
							end_date: sRoom.end_date || undefined,
							is_scheduled: true,
					  }
					: { start_date: undefined, end_date: undefined, is_scheduled: false };
				const pRoom &#x3D; r.private_room;
				const room: RoomDto &#x3D; {
					creator: u || new UserDto(),
					roomID: r.room_id,
					participant_count: r.participate.length,
					room_name: r.name,
					description: r.description || &quot;&quot;,
					is_temporary: r.is_temporary || false,
					is_private: pRoom !&#x3D;&#x3D; null,
					language: r.room_language || &quot;&quot;,
					has_explicit_content: r.explicit || false,
					has_nsfw_content: r.nsfw || false,
					room_image: r.playlist_photo || &quot;&quot;,
					tags: r.tags || [],
					spotifyPlaylistID: r.playlist_id || &quot;&quot;,
					childrenRoomIDs: childrenRooms,
					date_created: r.date_created,
					...scheduledRoom,
					room_size: Number(r.room_size) || 50,
				};
				result.push(room);
			}
		}
		return result;
	}

	async generateMultipleRoomDtoFromRoom(
		rooms: FullyQualifiedRoom[],
	): Promise&lt;RoomDto[]&gt; {
		if (rooms.length &#x3D;&#x3D;&#x3D; 0) {
			return [];
		}
		const userIDs: string[] &#x3D; rooms.map((r) &#x3D;&gt; r.room_creator);
		const users: UserWithAuth[] &#x3D; await this.dbUtils.getUsersWithAuth(userIDs);
		const userDtos: UserDto[] &#x3D; users.map((u) &#x3D;&gt; this.generateBriefUserDto(u));

		const result: RoomDto[] &#x3D; [];
		for (let i &#x3D; 0; i &lt; rooms.length; i++) {
			const r &#x3D; rooms[i];
			const u &#x3D; userDtos.find((u) &#x3D;&gt; u.userID &#x3D;&#x3D;&#x3D; r.room_creator);
			if (!u) {
				throw new Error(
					&quot;Weird error. Got users from Rooms table but user (&quot; +
						r.room_creator +
						&quot;) not found in Users table&quot;,
				);
			}
			const childrenRooms &#x3D; r.child_room_child_room_parent_room_idToroom;
			const scheduledRoom: {
				start_date: Date | undefined;
				end_date: Date | undefined;
				is_scheduled: boolean;
			} &#x3D;
				r.scheduled_room &#x3D;&#x3D;&#x3D; null
					? {
							start_date: undefined,
							end_date: undefined,
							is_scheduled: false,
					  }
					: {
							start_date: r.scheduled_room.start_date || undefined,
							end_date: r.scheduled_room.end_date || undefined,
							is_scheduled: true,
					  };
			const room: RoomDto &#x3D; {
				creator: u || new UserDto(),
				roomID: r.room_id,
				spotifyPlaylistID: r.playlist_id || &quot;&quot;,
				participant_count: r.participate.length,
				room_name: r.name,
				description: r.description || &quot;&quot;,
				is_temporary: r.is_temporary || false,
				is_private: r.private_room !&#x3D;&#x3D; null,
				...scheduledRoom,
				language: r.room_language || &quot;&quot;,
				has_explicit_content: r.explicit || false,
				has_nsfw_content: r.nsfw || false,
				room_image: r.playlist_photo || &quot;&quot;,
				tags: r.tags || [],
				date_created: r.date_created,
				childrenRoomIDs: childrenRooms.map((child) &#x3D;&gt; child.room_id),
				room_size: Number(r.room_size) || 50,
			};
			result.push(room);
		}
		return result;
	}

	async generateLiveChatMessageDto(
		messageID: string,
	): Promise&lt;LiveChatMessageDto&gt; {
		const message:
			| ({
					room_message: PrismaTypes.room_message | null;
			  } &amp; PrismaTypes.message)
			| null &#x3D; await this.prisma.message.findUnique({
			where: { message_id: messageID },
			include: { room_message: true },
		});

		if (message &#x3D;&#x3D;&#x3D; null || message.room_message &#x3D;&#x3D;&#x3D; null) {
			throw new Error(
				&quot;Message with id &quot; +
					messageID +
					&quot; does not exist. DTOGenService.generateLiveChatMessageDto():ERROR01&quot;,
			);
		}

		const [sender]: UserDto[] &#x3D; await this.generateMultipleUserDto([
			message.sender,
		]);

		const result: LiveChatMessageDto &#x3D; {
			messageID: messageID,
			messageBody: message.contents,
			sender: sender,
			roomID: message.room_message.room_id,
			dateCreated: message.date_sent,
		};

		return result;
	}

	async generateMultipleLiveChatMessageDto(
		messages: PrismaTypes.message[],
	): Promise&lt;LiveChatMessageDto[]&gt; {
		const senderIDs: string[] &#x3D; messages.map((m) &#x3D;&gt; m.sender);
		const uniqueSenderIDs: string[] &#x3D; [...new Set(senderIDs)];
		const senders: Map&lt;string, UserDto&gt; &#x3D; new Map&lt;string, UserDto&gt;();
		const sendUsers: UserDto[] &#x3D; await this.generateMultipleUserDto(
			uniqueSenderIDs,
		);
		for (let i &#x3D; 0; i &lt; uniqueSenderIDs.length; i++) {
			senders.set(uniqueSenderIDs[i], sendUsers[i]);
		}

		const roomIDs &#x3D; await this.prisma.room_message.findMany({
			where: {
				message_id: {
					in: messages.map((m) &#x3D;&gt; m.message_id),
				},
			},
		});

		const result: LiveChatMessageDto[] &#x3D; [];
		for (let i &#x3D; 0; i &lt; messages.length; i++) {
			const m &#x3D; messages[i];
			if (m &amp;&amp; m !&#x3D;&#x3D; null) {
				const s: UserDto | undefined &#x3D; senders.get(m.sender);
				if (!s) {
					throw new Error(
						&quot;Weird error. Got messages from Messages table but user (&quot; +
							m.sender +
							&quot;) not found in Users table&quot;,
					);
				}

				const roomMessage &#x3D; roomIDs.find((r) &#x3D;&gt; r.message_id &#x3D;&#x3D;&#x3D; m.message_id);
				if (!roomMessage) {
					throw new Error(
						&quot;Weird error. Got messages from Messages table but message (&quot; +
							m.message_id +
							&quot;) not found in Room Messages table&quot;,
					);
				}

				const message: LiveChatMessageDto &#x3D; {
					messageID: m.message_id,
					messageBody: m.contents,
					sender: s,
					roomID: roomMessage.room_id,
					dateCreated: m.date_sent,
				};
				result.push(message);
			}
		}
		return result;
	}

	async generateDirectMessageDto(pmID: string): Promise&lt;DirectMessageDto&gt; {
		const dm:
			| ({ message: PrismaTypes.message } &amp; PrismaTypes.private_message)
			| null &#x3D; await this.prisma.private_message.findUnique({
			where: {
				p_message_id: pmID,
			},
			include: {
				message: true,
			},
		});
		console.log(&quot;dm: &quot; + JSON.stringify(dm));

		if (dm &#x3D;&#x3D;&#x3D; null) {
			throw new Error(
				&quot;Message with id &quot; +
					pmID +
					&quot; does not exist. DTOGenService.generateDirectMessageDto():ERROR01&quot;,
			);
		}

		const [sender, recipient]: UserDto[] &#x3D; await this.generateMultipleUserDto([
			dm.message.sender,
			dm.recipient,
		]);
		const index: number &#x3D; await this.dbUtils.getDMIndex(
			sender.userID,
			recipient.userID,
			pmID,
		);

		const result: DirectMessageDto &#x3D; {
			index: index,
			messageBody: dm.message.contents,
			sender: sender,
			recipient: recipient,
			dateSent: dm.message.date_sent,
			dateRead: new Date(0),
			isRead: false,
			pID: dm.p_message_id,
			bodyIsRoomID: this.messageBodyIsRoomID(dm.message.contents),
		};
		console.log(&quot;result: &quot; + JSON.stringify(result));
		return result;
	}

	async getChatAsDirectMessageDto(
		participant1: string,
		participant2: string,
		unreadOnly &#x3D; false,
	): Promise&lt;DirectMessageDto[]&gt; {
		/*
		const user1: UserDto &#x3D; await this.generateUserDto(participant1);
		const user2: UserDto &#x3D; await this.generateUserDto(participant2);
		*/
		const { user1, user2 }: { user1: UserDto; user2: UserDto } &#x3D;
			await this.generateMultipleUserDto([participant1, participant2]).then(
				(users) &#x3D;&gt; {
					if (users.length !&#x3D;&#x3D; 2) {
						throw new Error(
							&quot;An unexpected error occurred in the database. Could not fetch users. DTOGenService.getChatAsDirectMessageDto():ERROR01&quot;,
						);
					}
					if (
						users[0].userID &#x3D;&#x3D;&#x3D; participant1 &amp;&amp;
						users[1].userID &#x3D;&#x3D;&#x3D; participant2
					) {
						return { user1: users[0], user2: users[1] };
					} else if (
						users[0].userID &#x3D;&#x3D;&#x3D; participant2 &amp;&amp;
						users[1].userID &#x3D;&#x3D;&#x3D; participant1
					) {
						return { user1: users[1], user2: users[0] };
					} else {
						throw new Error(
							&quot;An unexpected error occurred in the database. Could not fetch users. DTOGenService.getChatAsDirectMessageDto():ERROR03&quot;,
						);
					}
				},
			);

		const dms: ({
			message: PrismaTypes.message;
		} &amp; PrismaTypes.private_message)[] &#x3D;
			await this.prisma.private_message.findMany({
				where: {
					OR: [
						{
							AND: [
								{ message: { sender: user1.userID } },
								{ recipient: user2.userID },
							],
						},
						{
							AND: [
								{ message: { sender: user2.userID } },
								{ recipient: user1.userID },
							],
						},
					],
				},
				include: {
					message: true,
				},
			});
		console.log(
			&quot; direct messages between &quot; + user1.username + &quot; and &quot; + user2.username,
		);
		console.log(dms);

		if (dms.length &#x3D;&#x3D;&#x3D; 0) {
			return [];
		}

		//filter unread messages
		if (unreadOnly) {
			//a future feature
		}

		//sort messages by date
		dms.sort((a, b) &#x3D;&gt; {
			return a.message.date_sent.getTime() - b.message.date_sent.getTime();
		});

		const result: DirectMessageDto[] &#x3D; [];
		for (let i &#x3D; 0; i &lt; dms.length; i++) {
			const dm &#x3D; dms[i];
			if (dm &amp;&amp; dm !&#x3D;&#x3D; null) {
				const sender: UserDto &#x3D;
					dm.message.sender &#x3D;&#x3D;&#x3D; user1.userID ? user1 : user2;
				const recipient: UserDto &#x3D;
					dm.recipient &#x3D;&#x3D;&#x3D; user1.userID ? user1 : user2;

				//body is room id, if it is: ##uuidv4##
				// uuid v4 regex: /^[0-9A-F]{8}-[0-9A-F]{4}-[4][0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i
				const message: DirectMessageDto &#x3D; {
					index: i,
					messageBody: dm.message.contents,
					sender: sender,
					recipient: recipient,
					dateSent: dm.message.date_sent,
					dateRead: new Date(0),
					isRead: false,
					pID: dm.p_message_id,
					bodyIsRoomID: this.messageBodyIsRoomID(dm.message.contents),
				};
				result.push(message);
			}
		}
		return result;
	}

	async generateMultipleDirectMessageDto(
		dms: ({
			message: PrismaTypes.message;
		} &amp; PrismaTypes.private_message)[],
	): Promise&lt;DirectMessageDto[]&gt; {
		const result: DirectMessageDto[] &#x3D; [];

		let uniqueUserIDs: string[] &#x3D; [
			...new Set(dms.map((dm) &#x3D;&gt; dm.message.sender)),
		];
		uniqueUserIDs &#x3D; [
			...uniqueUserIDs,
			...new Set(dms.map((dm) &#x3D;&gt; dm.recipient)),
		];
		const users: UserDto[] &#x3D; await this.generateMultipleUserDto(
			uniqueUserIDs,
			undefined,
		);

		for (let i &#x3D; 0; i &lt; dms.length; i++) {
			const dm &#x3D; dms[i];
			const sender: UserDto | undefined &#x3D; users.find(
				(u) &#x3D;&gt; u.userID &#x3D;&#x3D;&#x3D; dm.message.sender,
			);
			const recipient: UserDto | undefined &#x3D; users.find(
				(u) &#x3D;&gt; u.userID &#x3D;&#x3D;&#x3D; dm.recipient,
			);
			if (!sender || !recipient) {
				throw new Error(
					&quot;Weird error. Got messages from DMs table but user not found in Users table&quot;,
				);
			}

			const message: DirectMessageDto &#x3D; {
				index: i,
				messageBody: dm.message.contents,
				sender: sender,
				recipient: recipient,
				dateSent: dm.message.date_sent,
				dateRead: new Date(0),
				isRead: false,
				pID: dm.p_message_id,
				bodyIsRoomID: this.messageBodyIsRoomID(dm.message.contents),
			};
			result.push(message);
		}
		return result;
	}

	messageBodyIsRoomID(messageBody: string): boolean {
		// format: ##uuidv4##
		const regexPattern &#x3D; /^##(.+?)##$/;
		const match &#x3D; messageBody.match(regexPattern);

		// if there&#x27;s a match and the captured group (the content between ##) is a valid UUID, return true
		if (match &amp;&amp; validator.isUUID(match[1])) {
			return true;
		}
		return false;
	}
}
</code></pre>
    </div>

</div>













                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

          <label class="dark-mode-switch">
               <input type="checkbox">
               <span class="slider">
                    <svg class="slider-icon" viewBox="0 0 24 24" fill="none" height="20" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" width="20" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"></path>
                    </svg>
               </span>
          </label>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'injectable';
            var COMPODOC_CURRENT_PAGE_URL = 'DtoGenService.html';
            var MAX_SEARCH_RESULTS = 15;
       </script>

       <script>
               $darkModeToggleSwitchers = document.querySelectorAll('.dark-mode-switch input');
               checkToggle(darkModeState);
               if ($darkModeToggleSwitchers.length > 0) {
                    for (var i = 0; i < $darkModeToggleSwitchers.length; i++) {
                         $darkModeToggleSwitchers[i].addEventListener('change', function (event) {
                              darkModeState = !darkModeState;
                              toggleDarkMode(darkModeState);
                         });
                    }
               }
          </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>

       <script src="../js/menu-wc.js" defer></script>
       <script nomodule src="../js/menu-wc_es5.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
